"use strict";(()=>{var e={};e.id=846,e.ids=[846],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},80412:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>w,patchFetch:()=>A,requestAsyncStorage:()=>j,routeModule:()=>_,serverHooks:()=>b,staticGenerationAsyncStorage:()=>N});var r={};a.r(r),a.d(r,{DELETE:()=>m,GET:()=>c,POST:()=>f,PUT:()=>p});var s=a(49303),d=a(88716),i=a(60670),o=a(87070),n=a(9487),l=a(49033),u=a(57745);async function c(e){try{let t;let{searchParams:a}=new URL(e.url),r=a.get("table"),s=a.get("id");if(!r)return o.NextResponse.json({error:"Table parameter is required"},{status:400});switch(r){case"users":t=s?await n.db.select().from(l.users).where((0,u.eq)(l.users.id,s)):await n.db.select().from(l.users).limit(100);break;case"projects":t=s?await n.db.select().from(l.projects).where((0,u.eq)(l.projects.id,s)):await n.db.select().from(l.projects).limit(100);break;case"talent_profiles":t=s?await n.db.select().from(l.talentProfiles).where((0,u.eq)(l.talentProfiles.id,s)):await n.db.select().from(l.talentProfiles).limit(100);break;default:return o.NextResponse.json({error:"Invalid table name"},{status:400})}return o.NextResponse.json({data:t})}catch(e){return console.error("Database query error:",e),o.NextResponse.json({error:"Database query failed"},{status:500})}}async function f(e){try{let t;let{table:a,data:r}=await e.json();if(!a||!r)return o.NextResponse.json({error:"Table and data parameters are required"},{status:400});switch(a){case"users":t=await n.db.insert(l.users).values(r).returning();break;case"projects":t=await n.db.insert(l.projects).values(r).returning();break;case"talent_profiles":t=await n.db.insert(l.talentProfiles).values(r).returning();break;default:return o.NextResponse.json({error:"Invalid table name"},{status:400})}return o.NextResponse.json({success:!0,data:t})}catch(e){return console.error("Database insert error:",e),o.NextResponse.json({error:"Database insert failed"},{status:500})}}async function p(e){try{let t;let{table:a,id:r,data:s}=await e.json();if(!a||!r||!s)return o.NextResponse.json({error:"Table, id, and data parameters are required"},{status:400});switch(a){case"users":t=await n.db.update(l.users).set(s).where((0,u.eq)(l.users.id,r)).returning();break;case"projects":t=await n.db.update(l.projects).set(s).where((0,u.eq)(l.projects.id,r)).returning();break;case"talent_profiles":t=await n.db.update(l.talentProfiles).set(s).where((0,u.eq)(l.talentProfiles.id,r)).returning();break;default:return o.NextResponse.json({error:"Invalid table name"},{status:400})}return o.NextResponse.json({success:!0,data:t})}catch(e){return console.error("Database update error:",e),o.NextResponse.json({error:"Database update failed"},{status:500})}}async function m(e){try{let t;let{searchParams:a}=new URL(e.url),r=a.get("table"),s=a.get("id");if(!r||!s)return o.NextResponse.json({error:"Table and id parameters are required"},{status:400});switch(r){case"users":t=await n.db.delete(l.users).where((0,u.eq)(l.users.id,s)).returning();break;case"projects":t=await n.db.delete(l.projects).where((0,u.eq)(l.projects.id,s)).returning();break;case"talent_profiles":t=await n.db.delete(l.talentProfiles).where((0,u.eq)(l.talentProfiles.id,s)).returning();break;default:return o.NextResponse.json({error:"Invalid table name"},{status:400})}return o.NextResponse.json({success:!0,data:t})}catch(e){return console.error("Database delete error:",e),o.NextResponse.json({error:"Database delete failed"},{status:500})}}let _=new s.AppRouteRouteModule({definition:{kind:d.x.APP_ROUTE,page:"/api/db/route",pathname:"/api/db",filename:"route",bundlePath:"app/api/db/route"},resolvedPagePath:"/home/project/app/api/db/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:j,staticGenerationAsyncStorage:N,serverHooks:b}=_,w="/api/db/route";function A(){return(0,i.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:N})}},9487:(e,t,a)=>{a.d(t,{db:()=>n});var r=a(62237),s=a(61524),d=a(49033);let i=process.env.DATABASE_URL;if(!i)throw Error("DATABASE_URL is not defined in environment variables");let o=(0,r.qn)(i),n=(0,s.tS)(o,{schema:d})},49033:(e,t,a)=>{a.r(t),a.d(t,{activityLogs:()=>b,adminUsers:()=>w,companies:()=>c,escrowHistory:()=>y,escrowTransactions:()=>A,notifications:()=>N,projectBids:()=>m,projectDeliverables:()=>_,projectMessages:()=>L,projectReviews:()=>j,projects:()=>p,talentProfiles:()=>f,users:()=>u,waitlist:()=>g});var r=a(8324),s=a(80967),d=a(72140),i=a(1575),o=a(98748),n=a(28680),l=a(12941);let u=(0,r.af)("users",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),fullName:(0,d.fL)("full_name").notNull(),email:(0,d.fL)("email").notNull().unique(),username:(0,d.fL)("username").unique(),userRole:(0,d.fL)("user_role").notNull().default("talent"),companyId:(0,s.Vj)("company_id").references(()=>c.id),createdAt:(0,i.AB)("created_at").defaultNow(),updatedAt:(0,i.AB)("updated_at").defaultNow()}),c=(0,r.af)("companies",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),name:(0,d.fL)("name").notNull(),website:(0,d.fL)("website"),industry:(0,d.fL)("industry"),createdAt:(0,i.AB)("created_at").defaultNow(),updatedAt:(0,i.AB)("updated_at").defaultNow()}),f=(0,r.af)("talent_profiles",{id:(0,s.Vj)("id").primaryKey().references(()=>u.id),fullName:(0,d.fL)("full_name").notNull(),email:(0,d.fL)("email").notNull(),username:(0,d.fL)("username").unique(),phone:(0,d.fL)("phone"),location:(0,d.fL)("location"),linkedin:(0,d.fL)("linkedin"),portfolio:(0,d.fL)("portfolio"),bio:(0,d.fL)("bio"),expertise:(0,d.fL)("expertise").notNull(),resumeUrl:(0,d.fL)("resume_url"),isQualified:(0,o.O7)("is_qualified").default(!1),qualificationReason:(0,d.fL)("qualification_reason"),qualificationHistory:(0,n.JB)("qualification_history"),experienceBadge:(0,d.fL)("experience_badge"),portfolioVisible:(0,o.O7)("portfolio_visible").default(!0),trustScore:(0,l._L)("trust_score"),trustScoreUpdatedAt:(0,i.AB)("trust_score_updated_at"),trustScoreFactors:(0,n.JB)("trust_score_factors"),createdAt:(0,i.AB)("created_at").defaultNow(),updatedAt:(0,i.AB)("updated_at").defaultNow()}),p=(0,r.af)("projects",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),title:(0,d.fL)("title").notNull(),description:(0,d.fL)("description").notNull(),status:(0,d.fL)("status").notNull().default("draft"),category:(0,d.fL)("category"),deadline:(0,i.AB)("deadline"),projectBudget:(0,l._L)("project_budget"),estimatedHours:(0,l._L)("estimated_hours"),hourlyRate:(0,l._L)("hourly_rate"),minimumBadge:(0,d.fL)("minimum_badge"),flagged:(0,o.O7)("flagged").default(!1),clientId:(0,s.Vj)("client_id").references(()=>u.id),talentId:(0,s.Vj)("talent_id").references(()=>u.id),createdBy:(0,s.Vj)("created_by").references(()=>u.id),requestingUser:(0,s.Vj)("requesting_user").references(()=>u.id),requestingBusiness:(0,s.Vj)("requesting_business").references(()=>c.id),matchedTalent:(0,d.fL)("matched_talent"),metadata:(0,n.JB)("metadata"),createdAt:(0,i.AB)("created_at").defaultNow(),updatedAt:(0,i.AB)("updated_at").defaultNow()}),m=(0,r.af)("project_bids",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),projectId:(0,s.Vj)("project_id").references(()=>p.id).notNull(),professionalId:(0,s.Vj)("professional_id").references(()=>u.id).notNull(),ratePerHour:(0,l._L)("rate_per_hour").notNull(),status:(0,d.fL)("status").default("pending"),createdAt:(0,i.AB)("created_at").defaultNow(),updatedAt:(0,i.AB)("updated_at").defaultNow()}),_=(0,r.af)("project_deliverables",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),projectId:(0,s.Vj)("project_id").references(()=>p.id).notNull(),title:(0,d.fL)("title").notNull(),description:(0,d.fL)("description").notNull(),status:(0,d.fL)("status").notNull().default("recommended"),notes:(0,d.fL)("notes"),feedback:(0,d.fL)("feedback"),submittedAt:(0,i.AB)("submitted_at"),createdAt:(0,i.AB)("created_at").defaultNow(),updatedAt:(0,i.AB)("updated_at").defaultNow()}),j=(0,r.af)("project_reviews",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),projectId:(0,s.Vj)("project_id").references(()=>p.id).notNull(),reviewerId:(0,s.Vj)("reviewer_id").references(()=>u.id).notNull(),rating:(0,l._L)("rating").notNull(),comment:(0,d.fL)("comment"),addToPortfolio:(0,o.O7)("add_to_portfolio").default(!1),createdAt:(0,i.AB)("created_at").defaultNow()}),N=(0,r.af)("notifications",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),userId:(0,s.Vj)("user_id").references(()=>u.id).notNull(),title:(0,d.fL)("title").notNull(),message:(0,d.fL)("message").notNull(),type:(0,d.fL)("type").notNull(),isRead:(0,o.O7)("is_read").default(!1),metadata:(0,n.JB)("metadata").default({}),createdAt:(0,i.AB)("created_at").defaultNow()}),b=(0,r.af)("activity_logs",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),projectId:(0,s.Vj)("project_id").references(()=>p.id),actorId:(0,s.Vj)("actor_id").references(()=>u.id),action:(0,d.fL)("action").notNull(),details:(0,n.JB)("details").default({}),createdAt:(0,i.AB)("created_at").defaultNow()}),w=(0,r.af)("admin_users",{id:(0,s.Vj)("id").primaryKey().references(()=>u.id),email:(0,d.fL)("email").notNull(),superAdmin:(0,o.O7)("super_admin").default(!1),username:(0,d.fL)("username").unique(),createdAt:(0,i.AB)("created_at").defaultNow()}),A=(0,r.af)("escrow_transactions",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),projectId:(0,s.Vj)("project_id").references(()=>p.id).notNull(),status:(0,d.fL)("status").notNull().default("pending"),amount:(0,l._L)("amount").notNull(),releasedAt:(0,i.AB)("released_at"),createdAt:(0,i.AB)("created_at").defaultNow(),updatedAt:(0,i.AB)("updated_at").defaultNow()}),y=(0,r.af)("escrow_history",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),projectId:(0,s.Vj)("project_id").references(()=>p.id).notNull(),action:(0,d.fL)("action").notNull(),actorId:(0,s.Vj)("actor_id").references(()=>u.id),actorName:(0,d.fL)("actor_name"),reason:(0,d.fL)("reason"),metadata:(0,n.JB)("metadata").default({}),createdAt:(0,i.AB)("created_at").defaultNow()}),L=(0,r.af)("project_messages",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),projectId:(0,s.Vj)("project_id").references(()=>p.id).notNull(),senderId:(0,s.Vj)("sender_id").references(()=>u.id).notNull(),senderRole:(0,d.fL)("sender_role").notNull(),text:(0,d.fL)("text").notNull(),deliverableId:(0,s.Vj)("deliverable_id").references(()=>_.id),createdAt:(0,i.AB)("created_at").defaultNow()}),g=(0,r.af)("waitlist",{id:(0,s.Vj)("id").primaryKey().defaultRandom(),email:(0,d.fL)("email").notNull().unique(),signedUpAt:(0,i.AB)("signed_up_at").defaultNow()})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[510,656],()=>a(80412));module.exports=r})();